<!DOCTYPE HTML>
<html>

<head>
    <title>GD Shitty List</title>
    <link rel="stylesheet" href="//cdn.rawgit.com/hiun/NanumSquare/master/nanumsquare.css">
    <link href="css/stylesheet.css" type="text/css" rel="stylesheet">
    <link href="css/stylesheet-mobile.css" type="text/css" rel="stylesheet">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <meta name="description" content="Geometry Dash Shitty List">
    <meta name="viewport" content="user-scalable=no">
    <script type='text/javascript' src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script type='text/javascript' src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script type='text/javascript' src="https://cdn.jsdelivr.net/npm/sweetalert2@8"></script>
    <script type='text/javascript' src="js/list.js"></script>
    <script type='text/javascript' src="js/banlist.js"></script>
    <script type='text/javascript' src="js/userrank.js"></script>
    <script type='text/javascript' src="js/info.js"></script>
    <script type='text/javascript' src="js/mobile.js"></script>
    <meta charset="UTF-8">
</head>

<body>
    <cover-all id="main">
        <header id="header" class="dl-header">
            <div>
                <img class="header" id="side_button" src="img/sidebar.png" style="cursor:pointer">
                <img class="header" id="title-img" src="img/header.png" width="320px" style="padding-top: 11px">
            </div>
        </header>
        <div id="info">
            <br><br><br>
            <div class="display" id="map">
                <div id="display">
                    <div id="welcome" style="font-size: 20px"></div>
                    <div id="more-info"></div>
                    <div id="display-info">
                        <div id="title"></div>
                        <div id="author"></div>
                        <div id="vid"></div>
                        <div id="mapInfo">
                            <center>
                                <div class="Info-mapInfo-line" id="mapInfo-line-f">
                                    <div class="Info-mapInfo" id="level-id"></div>
                                    <div class="Info-mapInfo" id="level-password"></div>
                                    <div class="Info-mapInfo" id="level-diff"></div>
                                </div>
                            </center>
                        </div>
                        <br>
                        <div id="info-record">
                            <br>
                            <div id="info-record-title"><strong>
                                    <center>Records</center>
                                </strong></div>
                            <div id="cutline">
                                <center><span id="cutline-percent"></span>% or better required to qualify</center><br>
                            </div>
                            <div id="info-record-amount"></div>
                            <div id="info-record-table"></div>
                            <br>
                            <center>If want see some record video, Click to Record</center>
                            <div id="info-record"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="display" id="more">
                <hr id="display-line" style="width: 75%">
                <div class="more" id="summit-record">
                    <div id="summit-record-title">
                        <center><strong>Do you have a record of can be on list?</strong>
                    </div>
                    <div id="summit-record-request" class="userrank-link">Submit Records!</div>
                    </center>
                </div>
                <br>
                <div class="more" id="userpointrank">
                    <div id="userpointrank-title">
                        <center><strong>User Level Point Ranking</strong></center>
                    </div>
                    <div id="userpointrank-list">
                        <div id="userpointrank-list-top15"></div>
                        <div class="userrank-link" id="up-more">Click to Show more</div>
                    </div>
                </div>
                <br>
                <div class="more" id="discord" style="font-size: 20px">
                    <center>
                        <strong>Shitty Forum Discord</strong><br>
                        <iframe style="margin-top: 5px; margin-bottom: 5px;" src="https://discordapp.com/widget?id=583278807499145216&theme=white" width="95%" height="500" allowtransparency="true" frameborder="0"></iframe>
                    </center>
                </div>
                <br><br>
            </div>
        </div>
        <div id="side">
            <div id="menu"></div>
            <div id="demonlist"></div>
        </div>
        <div class="popup" id="popup-up">
            <div id="popup-up-main">
                <div id="popup-up-info">
                    <div style="background: rgb(163, 163, 163)"><strong>Search User : <input id="popup-up-search" type="text" style="text-align: left"></strong></div>
                    <div id="popup-up-list">
                        <div id="popup-up-user-list"></div>
                    </div>
                </div>
                <div id="popup-up-display">
                    <div id="popup-up-name" style="margin-top: 4px"></div>
                    <div id="popup-up-score" style="margin-top: 6px"></div><br>
                    <div id="popup-up-user">
                        <center>
                            <div id="popup-up-user-verified" style="margin-top: 4px"></div>
                            <div id="popup-up-user-clear" style="margin-top: 20px"></div>
                    </div>
                    </center><br>
                    <div id="popup-up-user-best" style="margin-top: 4px"></div>
                    <div id="popup-up-user-vid" style="margin-top: 4px"></div>
                </div>
            </div>
            <div id="popup-up-description" style="font-size: 13px">
                <hr>
                <center>All User Level Points are automatically calculated and sorted. <span onclick="userpointInfo()" style="cursor: pointer"><u>Want to know the User Level Point formula?</u></center><br>
                <div id="popup-up-close" class="close" style="font-size: 20px">Close</div>
            </div>
        </div>
        <div id="copyright">
            <hr>
            <center>&copy; 2019 RedLime and Shitty Forum <span id="test"></span></center>
        </div>
    </cover-all>
</body>
<script type="text/javascript">


function getAuthors(rank) {
    alert(list[rank].more.toString());
}

function load(num) {
    $("#map").animate({ "opacity": "0.0" }, 0);
    $("#map").animate({ "opacity": "1.0" }, 300);
    $('body,html').animate({ scrollTop: 0 }, 200);
    $('.entry').removeClass('selected');
    $("#list" + (select)).removeClass('selected');
    select = num;
    $("#list" + (select)).addClass('selected');

    if (num == 0) {
        $("#welcome").show();
        $("#display-info").hide();
        $("#more-info").hide();
        $("#welcome").html(home_html);
    } else if (num == -2) {
        $("#welcome").hide();
        $("#display-info").hide();
        $("#more-info").show();
        $("#more-info").html(moreinfo_html);
    } else {
        $("#welcome").hide();
        $("#more-info").hide();
        $("#display-info").show();
        var entry = list[num - 1];

        var author = entry.author;
        var final_author;
        if (author.includes(' more ')) {
            final_author = author.replace(' more ', ' <u><span onclick="getAuthors(' + (num - 1) + ')" style="cursor:pointer">more</u> ');
        } else {
            final_author = author;
        }
        final_author = final_author.replace(' [', ', Verified by ').replace(']', "");
        var vid_link = entry.verificationVid.replace('https://www.youtube.com/watch?v=', '');

        $("#title").html(`<center><strong>${entry.name}</strong></center>`);
        $("#author").html(`<center>by ${final_author}${entry.hacked == null ? "" : entry.hacked == true ? "<br><small><strong>[Hacked]</small></strong>" : "<br><small><strong>[Possibly Hacked]</small></strong>"}</center>`);
        $("#vid").html(`<center><hr><iframe class="vid" src="https://www.youtube.com/embed/${vid_link}?enablejsapi=1&version=3&playerapiid=ytplayer" frameborder="0" allowfullscreen></iframe><hr></center>`);
        if ($("#display").width() < 760) {
            $(".vid").css("width", $("#display").width() + "px");
            $(".vid").css("height", ($(".vid").width() / 1.777778) + "px");
        }

        $("#level-id").html(`<center><strong>Level ID</strong><br>${entry.id}</center><br>`);
        $("#level-password").html(`<center><strong>Password</strong><br>${entry.pass}</center><br>`);
        $("#level-diff").html(`<center><strong>Difficulty</strong><br>${entry.difficult != null ? entry.difficult + "/10.0" : "rating/10.0"}</center><br>`);
        $("#cutline-percent").html(`<strong>${entry.percentToQualify}</strong>`);

        $("#info-record-table").html("");
        var beat = 0;
        var records = entry.vids;
        var rec_html = `<center><table style='border-left:0;border-right:0;border-bottom:0;border-top:0' id="info-record-list"><tr><td><strong>User</strong></td><td><strong>Percent</strong></td><td><strong>Used hz</strong></td></tr>`;
        records.sort(function(a, b) {
            return b.percent - a.percent;
        });
        for (j = 0; j < records.length; j++) {
            var rec = records[j];
            var hz = "";
            if (rec.hz == null) {
                hz = "144hz";
            } else {
                hz = rec.hz;
            }

            if (rec.percent == 100) {
                beat++;
                rec_html = rec_html + `<tr><td><a href="${rec.link}" target="_blank" style="text-decoration: none"><strong>${rec.user}</strong></a></td><td><a href="${rec.link}" target="_blank" style="text-decoration: none"><strong>${rec.percent}%</strong></a></td><td><a href="${rec.link}" target="_blank" style="text-decoration: none"><strong>${hz}</strong></a></td></tr>`;
            } else {
                rec_html = rec_html + `<tr><td><a href="${rec.link}" target="_blank" style="text-decoration: none">${rec.user}</a></td><td><a href="${rec.link}" target="_blank" style="text-decoration: none">${rec.percent}%</a></td><td><a href="${rec.link}" target="_blank" style="text-decoration: none">${hz}</a></td></tr>`;
            }
        }
        rec_html = rec_html + `</table></center>`;
        if (records.length == 0) {
            rec_html = rec_html + `<center>There is no updated record! Be the first to update a record on the list!</center>`;
        }
        $("#info-record-table").html(rec_html);
        $("#info-record-amount").html(`<center>Of the ${records.length} records registered, <strong>${beat}</strong> records are completed.</center>`);
    }
}

load(0);
$("#more").animate({ "opacity": "0.0" }, 0);
$("#more").animate({ "opacity": "1.0" }, 300);

$("<div>").addClass("entry selected").html(`<div class="list" id="list0" onMouseOver="this.style.backgroundColor='rgba(163, 163, 163, 0.6)'" onMouseOut="this.style.backgroundColor=''"><strong>Home</strong></div>`).data('order', 0).appendTo($("#menu"));
$("<div>").html(`<hr>`).appendTo($("#menu"));
$("<div>").addClass("entry").html(`<div class="list" id="list-2" onMouseOver="this.style.backgroundColor='rgba(163, 163, 163, 0.6)'" onMouseOut="this.style.backgroundColor=''"><strong>Infomation</strong></div>`).data('second-order', -2).appendTo($("#menu"));
$("<div>").html(`<hr>`).appendTo($("#menu"));
$("<div>").html(`<div class="list"><strong>Search : </strong><input id="search" type="text"></div>`).appendTo($("#menu"));
$("<div>").html(`<hr>`).appendTo($("#menu"));
for (i = 0; i < list.length; i++) {
    var entry = list[i];
    var victor = 0;
    for (var o = 0; o < entry.vids.length ; o++) {
        if (entry.vids[o].percent == 100) victor++;
    }
    $("<div>").addClass("entry").html(`<div class="list" id="list${i+1}" onMouseOver="this.style.backgroundColor='rgba(163, 163, 163, 0.6)'" onMouseOut="this.style.backgroundColor=''"><strong>${entry.name}</strong><br><small><strong>${victor} Victors </strong>/ ${entry.vids.length} Records</small><br><em class="list_author">by ${entry.author}</em></div>`).data('order', i + 1).appendTo($("#demonlist"));
    $("<div>").html(`<hr>`).appendTo($("#demonlist"));
}

var res = function() {
    var height = $(window).height();
    var width = $(window).width();

    checkMobile(width, height);
    var header_height = parseFloat($("header").height().toString().replace("px", ""));
    let remainingHeight = (height - header_height) + "px";
    $("#side").css({ "height": remainingHeight, "top": header_height + "px" });
    var pu_up_width = parseFloat($("#popup-up").width().toString().replace("px", ""));
    $("#popup-up").animate({ "left": (width / 2 - (pu_up_width / 2)) + "px" }, 0);
    if ($("#display").width() < 760) {
        $(".vid").css("width", $("#display").width() + "px");
        $(".vid").css("height", ($(".vid").width() / 1.777778) + "px");
    }
};
$(window).resize(function() { if (searching == false) { res(); }});
res();

var select = 0;
var select_search = -1;
var menu_flag = false;
var searching = false;

$("#side").fadeOut();
$(document).ready(function() {
    $("#side_button").bind("click", function() {
        if (menu_flag) {
            $("#side").fadeOut();
            $("#side").animate({ "left": "-700px" }, 300);
            menu_flag = false;
        } else {
            $("#side").animate({ "left": "0px" }, 300);
            $("#side").fadeIn();
            menu_flag = true;
        }
    });

    $("#search").focusout(function() {
        if (select_search != -1) {
            load(select_search);
            select_search = -1;
        }
    });


    $("#popup-up").hide();
    $("#up-more").click(function() {
        $('body,html').animate({ scrollTop: 0 }, 800);
        $("#popup-up").fadeIn(300);
    });

    $("#popup-up-search").focusout(function() {
        if (search_user != -1) {
            loadUserPointInfo(search_user);
            search_user = -1;
        }
    });

    $("#search").click(function() {
        searching = true;
    });

    $("#popup-up-search").focusout(function() {
        searching = false;
    });
});

$(document).on("click", ".entry", function() {
    if ($(this).data('order') == null && $(this).data('second-order') != null) {
        load($(this).data('second-order'));
        return false;
    }
    var order = $(this).data('order');
    load(parseInt(order));
});

$(document).on('mouseenter', ".entry", function() {
    if ($(this).data('order') == null && $(this).data('second-order') != null) {
        select_search = $(this).data('second-order')
        return false;
    }
    select_search = $(this).data('order');
});
$(document).on('mouseleave', ".entry", function() {
    if ($(this).data('order') == null && $(this).data('second-order') != null) {
        select_search = -2;
        return false;
    }
    select_search = -1;
});


$("#search").on("propertychange change keyup paste input", function() {
    var currentVal = $(this).val();
    $("#demonlist").html("");
    var text = currentVal.toString().toLowerCase();
    var y = 0;
    for (i = 0; i < list.length; i++) {
        var entry = list[i];
        var name = entry.name.toString().toLowerCase();
        var author = entry.author.toString().toLowerCase();
        var more = entry.more.toString().toLowerCase();
        if ((name.includes(text) == true || author.includes(text) == true || more.includes(text)) == true || currentVal.toString() == "") {
            y = y + 1;
            var victor = 0;
            for (var o = 0; o < entry.vids.length ; o++) {
                if (entry.vids[o].percent == 100) victor++;
            }
            $("<div>").addClass("entry").html(`<div class="list" id="list${i+1}" onMouseOver="this.style.backgroundColor='rgba(163, 163, 163, 0.6)'" onMouseOut="this.style.backgroundColor=''"><strong>${entry.name}</strong><br><small><strong>${victor} Victors </strong>/ ${entry.vids.length} Records</small><br><em class="list_author">by ${entry.author}</em></div>`).data('order', i + 1).appendTo($("#demonlist"));
            $("<div>").html(`<hr>`).appendTo($("#demonlist"));
        }
    }
});


var uptop15 = `<table id="userpointrank-table">`;
for (user_num = 0; user_num < userData.length; user_num++) {
    var points = userData[user_num].point.toString();
    if (points.split(".").length == 2) {
        var zero = points.split(".")[1];
        const zelength = zero.length;
        for (i = 3; i > zelength; i--) {
            zero = zero + `<span style="${user_num%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">0</span>`
        }
        points = points.split(".")[0] + "." + "<small>" + zero + "</small>"
    } else {
        points = points + `<span style="${user_num%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">.<small style="${user_num%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">000</small></span>`;
    }

    if (user_num < 15) {
        uptop15 = uptop15 + `<tr><td><img src="img/${getTrophy(user_num+1)}" width="17px"></td><td>${userData[user_num].name}</td><td>${points.replace("rgb(240, 240, 240)", "white").replace("rgb(240, 240, 240)", "white")}</td></tr>`;
    }
    $("<div style=\"cursor: pointer\">").addClass(user_num % 2 == 0 ? "uplist-user userlist" : "uplist-user-black userlist").html(`<table><tr><td><img src="img/${getTrophy(user_num+1)}" width="15px"></td><td>${userData[user_num].name}</td><td style="text-align: right">${points}</td></table>`).data('order', user_num).appendTo($("#popup-up-user-list"));
}
uptop15 = uptop15 + `</table>`;
$("#userpointrank-list-top15").html(uptop15);

$(document).on("click", ".userlist", function() {
    var order = $(this).data('order');
    loadUserPointInfo(parseInt(order));
});


var search_user = -1;

$(document).on('mouseenter', ".userlist", function() {
    search_user = $(this).data('order');
});
$(document).on('mouseleave', ".userlist", function() {
    search_user = -1;
});

$("#popup-up-search").on("propertychange change keyup paste input", function() {
    var currentVal = $(this).val();
    $("#popup-up-user-list").html("");
    var text = currentVal.toString().toUpperCase();
    var y = 0;
    for (var i = 0; i < userData.length; i++) {
        var name = userData[i].name.toUpperCase();
        var points = userData[i].point.toString();
        if (points.split(".").length == 2) {
            var zero = points.split(".")[1];
            const zelength = zero.length;
            for (var a = 3; a > zelength; a--) {
                zero = zero + `<span style="${y%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">0</span>`
            }
            points = points.split(".")[0] + "." + "<small>" + zero + "</small>"
        } else {
            points = points + `<span style="${y%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">.<small style="${y%2==0 ? "color: white" : "color: rgb(240, 240, 240)"}">000</small></span>`;
        }
        if (name.includes(text) == true || currentVal.toString() == "") {
            $("<div style=\"cursor: pointer\">").addClass(y % 2 == 0 ? "uplist-user userlist" : "uplist-user-black userlist").html(`<table><tr><td><img src="img/${getTrophy(i+1)}" width="15px"></td><td>${userData[i].name}</td><td style="text-align: right">${points}</td></table>`).data('order', i).appendTo($("#popup-up-user-list"));
            y = y + 1;
        }
    }
});

function loadUserPointInfo(order) {
    var user = userData[order];
    var clear_records = [];
    var best_records = 999;
    var isbest_verify = false;
    var vid = ``;
    user.records.sort(function(a, b) {
        return getPoint(b.rank, b.percent, parseInt(list[b.rank - 1].percentToQualify), b.hz) - getPoint(a.rank, a.percent, parseInt(list[a.rank - 1].percentToQualify), a.hz);
    })
    for (var i = 0; i < user.records.length; i++) {
        if (user.records[i].percent == 100) {
            clear_records.push(user.records[i].percent);
            if (user.records[i].rank < best_records) {
                best_records = user.records[i].rank;
                vid = user.records[i].link.replace('https://www.youtube.com/watch?v=', '');
            }
        }
    }
    var verified = "<strong style='font-size: 18px'>< Verified Levels ><br></strong>";
    if (user.verified.length == 0) {
        verified = verified + "Nothing :(";
    }
    for (var i = 0; i < user.verified.length; i++) {
        if (best_records > user.verified[i]) {
            best_records = user.verified[i];
            isbest_verify = true;
            vid = list[user.verified[i] - 1].verificationVid.replace('https://www.youtube.com/watch?v=', '');
        }
        verified = verified + `<a href="${list[user.verified[i]-1].verificationVid}">` + list[user.verified[i] - 1].name + "</a>" + (user.verified.length - 1 == i ? "" : ", ");
    }
    $("#popup-up-user-verified").html(verified);
    $("#popup-up-user-clear").html(`<center style="font-size: 18px"><strong>< Complete / All Records ><br><span style="font-size: 16px">${clear_records.length} Records / ${user.records.length} Records</span></strong><br><span style="font-size: 14px">> <u onclick="moreInfoClear(${order})" style="cursor: pointer">Show All Records</u> <</span></center>`);
    $("#popup-up-name").html(`<center><strong style="font-size: 25px"><img src="img/${getTrophy(order+1)}" width="20px">#${order+1} ${user.name}</center></strong>`);
    $("#popup-up-score").html(`<center style="font-size: 18px"><strong>User Level Point : </strong>${user.point} ULP</center>`);
    $("#popup-up-user-best").empty();
    $("#popup-up-user-vid").empty();
    $("#popup-up-user-best").html(`<center style="font-size: 18px"><strong>Best Achivement : ${list[best_records-1].name} ${isbest_verify==true ? "Verified" : "100%"}</strong></center>`);
    $("#popup-up-user-vid").html(`<center><iframe id="best-rec-vid" class="small-vid" style="width: 438px; height: 246px" src="https://www.youtube.com/embed/${vid}?enablejsapi=1&version=3&playerapiid=ytplayer" frameborder="0" allowfullscreen></center>`);
    
    $("#best-rec-vid").css("width", ($("#popup-up-display").width()*0.8)+"px");
    $("#best-rec-vid").css("height", ($("#best-rec-vid").width()/1.7778)+"px");
}

function moreInfoClear(order) {
    var user = userData[order];
    var clear_html = `<center><table id="uplist-user-clear"><tr><td><strong style="font-size=28px">Level</strong></td><td><strong style="font-size=28px">Rank, Used hz</strong></td><td><strong style="font-size=35px">ULP</strong></td></tr>`;
    for (var i = 0; i < user.records.length; i++) {
        var alink = `<a href=${user.records[i].link}>`;
        clear_html = clear_html + `<tr><td>${alink}${user.records[i].percent==100 ?`<strong>` : ``}${list[user.records[i].rank-1].name} ${user.records[i].percent}%${user.records[i].percent==100 ?`</strong>` : ``}</a></td><td>${alink}${user.records[i].hz}</a></td><td>${alink}(+ULP ${getPoint(user.records[i].rank, user.records[i].percent, parseInt(list[user.records[i].rank-1].percentToQualify), user.records[i].hz)})</a></td></tr>`;
    }
    clear_html = clear_html + `</table></center>`;
    Swal.fire({
        title: user.name + "'s Completed Levels",
        html: clear_html,
        width: '850px',
    })
}

$("#summit-record-request").click(function() {
    window.open('https://forms.gle/awmFyk6jkX4PbjHr8')
});


$(document).on("click", "#popup-up-close", function() {
    $("#popup-up").fadeOut(300);
    $('#best-rec-vid')[0].contentWindow.postMessage('{"event":"command","func":"' + 'pauseVideo' + '","args":""}', '*');
});


$(document).on("click", ".popup-ur-type", function() {
    $(".popup-ur-type").removeClass("up-type-selected");
    $(this).addClass("up-type-selected");
});

function userpointInfo() {
    load(-2);
    $("#best-rec-vid").html("");
    $("#popup-up").fadeOut(300);
    $('body,html').animate({ scrollTop: 350 }, 800);
}
</script>

</html>